{"version":3,"sources":["../src/selector.js"],"names":[],"mappings":"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","file":"selector.js","sourcesContent":["/**\n * Whitespace\n */\nconst SPACE = '\\u0020',\n  TAB = '\\u0009',\n  LINE_FEED = '\\u000A',\n  CARRIAGE_RETURN = '\\u000D',\n  FORM_FEED = '\\u000C'\n\nconst WHITESPACE = [SPACE, TAB, LINE_FEED, CARRIAGE_RETURN, FORM_FEED]\nconst CSS_COMBINATOR_WHITESPACE = `\\\\${SPACE}\\\\${TAB}\\\\${LINE_FEED}\\\\${CARRIAGE_RETURN}\\\\${FORM_FEED}`;\n\n/**\n * Other combinator separators\n */\nconst GREATER_THAN = '\\u003E'\nconst PLUS = '\\u002B'\nconst TILDE = '\\u007E'\n\nconst COMBINATORS = [TILDE, PLUS, GREATER_THAN].concat(WHITESPACE)\nconst CSS_COMBINATOR_NONWHITESPACE = `\\\\${GREATER_THAN}\\\\${TILDE}\\\\${PLUS}`;\n\nconst SELECTOR_REGEX = (() => {\n  return new RegExp(`([^${CSS_COMBINATOR_WHITESPACE}${CSS_COMBINATOR_NONWHITESPACE}])+`, 'g')\n})()\n\n/**\n * Takes a selector, returns an array of one or more sequences of simple selectors, delimited by combinators\n */\nexport default function Selector(selector) {\n  return {\n    \"pseudo\": pseudo(selector)\n  }\n}\n\nconst PSEUDO_CLASSES = new Set([ ':active',\n  ':checked',\n  ':disabled',\n  ':empty',\n  ':enabled',\n  ':first-child',\n  ':first-of-type',\n  ':focus',\n  ':hover',\n  ':lang(fr)',\n  ':last-child',\n  ':last-of-type',\n  ':link',\n  ':not(div)',\n  ':nth-child(an+b)',\n  ':nth-last-child(an+b)',\n  ':nth-last-of-type(an+b)',\n  ':nth-of-type(an+b)',\n  ':only-child',\n  ':only-of-type',\n  ':root',\n  ':target',\n  ':visited' ])\nconst DYNAMIC_PSEUDO_CLASSES = new Set([':link',\n  ':visited',\n  ':hover',\n  ':active',\n  ':focus'])\nconst UI_ELEMENT_PSEUDO_CLASSES = new Set([':enabled',\n  ':disabled',\n  ':checked',\n  ':indeterminate'])\nconst STRUCTURAL_PSEUDO_CLASSES_REGEX = /(:root|:nth-child\\(.*\\)|:nth-last-child\\(.*\\)|nth-of-type\\(.*\\)|:nth-last-of-type\\(.*\\)|:first-child|:last-child|:first-of-type|:last-of-type|:only-child|:only-of-type|:empty)/\n\nconst PSEUDO_ELEMENTS = new Set([ '::first-line',\n  ':first-line',\n  '::first-letter',\n  ':first-letter',\n  '::blank',\n  ':blank',\n  '::before',\n  ':before',\n  '::after',\n  ':after'])\n\n/**\nReturns either a pseudo-class object:\n{\n  type: (dynamic|target|language|ui element|structural|blank|negation|non-standard)\n  val: one of the PSEUDO_CLASSES or a non-standard value\n}\nOr a pseudo-element object:\n{\n  type: (element|non-standard)\n  val: one of the PSEUDO_ELEMENTS or a non-standard value\n}\n */\nfunction pseudo(selector) {\n  let pseudoToken = selector.match(/(::|:)(?!.*:).*/g) || []\n  if (pseudoToken.length > 1) console.error(\"REGEX to tokenize pseudo had multiple mathes!\", pseudoToken);\n  let result = {\"val\" : pseudoToken[0]}\n  if (!result.val) {\n    return undefined;\n  } else if (DYNAMIC_PSEUDO_CLASSES.has(result.val)) {\n    result.type = 'dynamic'\n  } else if (result.val ===':target') {\n    result.type = 'target'\n  } else if (/:lang\\(.+\\)/g.test(result.val)) {\n    result.type = 'language'\n  } else if (UI_ELEMENT_PSEUDO_CLASSES.has(result.val)) {\n    result.type = 'ui element'\n  } else if (STRUCTURAL_PSEUDO_CLASSES_REGEX.test(result.val)) {\n    result.type = 'structural'\n  } else if (/:contains\\(.*\\)/.test(result.val)) {\n    result.type = 'blank'\n  } else if (/:not\\(.*\\)/.test(result.val)) {\n    result.type = 'negation'\n  } else if(PSEUDO_ELEMENTS.has(result.val)) {\n    result.type = 'element'\n  } else {\n    result.type = 'non-standard'\n  }\n  return result\n}\n"]}